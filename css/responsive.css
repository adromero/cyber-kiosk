/* Responsive Multi-Theme Cyber Kiosk - Responsive Layout System */
/* Mobile-first approach with fluid typography and flexible grids */

/* ============================================================================
   FLUID TYPOGRAPHY
   Uses clamp() for responsive font sizes that scale smoothly
   ============================================================================ */

:root {
    /* Fluid font sizes - scale from mobile to desktop */
    --font-size-xs: clamp(0.75rem, 2vw, 0.9rem);
    --font-size-sm: clamp(0.9rem, 2.5vw, 1.1rem);
    --font-size-base: clamp(1rem, 3vw, 1.4rem);
    --font-size-md: clamp(1.2rem, 3.5vw, 1.8rem);
    --font-size-lg: clamp(1.5rem, 4vw, 2rem);
    --font-size-xl: clamp(2rem, 5vw, 3rem);
    --font-size-xxl: clamp(2.5rem, 6vw, 5rem);

    /* Spacing scale */
    --spacing-xs: clamp(5px, 1vw, 8px);
    --spacing-sm: clamp(8px, 1.5vw, 12px);
    --spacing-md: clamp(12px, 2vw, 20px);
    --spacing-lg: clamp(20px, 3vw, 30px);
    --spacing-xl: clamp(30px, 4vw, 50px);

    /* Container padding based on screen size */
    --container-padding: clamp(10px, 2vw, 20px);

    /* Panel gaps */
    --panel-gap: clamp(10px, 2vw, 20px);
}

/* ============================================================================
   RESPONSIVE GRID SYSTEM
   Dynamic CSS Grid that adapts from 1 column (mobile) to 3+ columns (desktop)
   ============================================================================ */

/* Base grid - mobile first (single column) */
.main-grid {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-areas:
        "panel1"
        "panel2"
        "panel3"
        "panel4";
    gap: var(--panel-gap);
    flex: 1;
    overflow: hidden;
}

/* Grid item positioning */
.grid-panel {
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.grid-panel-1 { grid-area: panel1; }
.grid-panel-2 { grid-area: panel2; }
.grid-panel-3 { grid-area: panel3; }
.grid-panel-4 { grid-area: panel4; }
.grid-panel-5 { grid-area: panel5; }
.grid-panel-6 { grid-area: panel6; }
.grid-panel-7 { grid-area: panel7; }
.grid-panel-8 { grid-area: panel8; }

/* ============================================================================
   BREAKPOINT: EXTRA SMALL (4-6" phones)
   480px and below - Single column, compact spacing
   ============================================================================ */

@media (max-width: 480px) {
    .container {
        padding: var(--spacing-sm);
    }

    .header {
        flex-direction: column;
        gap: var(--spacing-sm);
        text-align: center;
        font-size: var(--font-size-md);
    }

    .header-right {
        flex-direction: column;
        gap: var(--spacing-xs);
    }

    .widget-header {
        padding: var(--spacing-sm);
        flex-direction: column;
        gap: var(--spacing-xs);
        align-items: flex-start;
    }

    .widget-title {
        font-size: var(--font-size-md);
    }

    .widget-status {
        font-size: var(--font-size-sm);
    }

    .widget-content {
        padding: var(--spacing-sm);
    }

    /* Compact weather display */
    .weather-temp {
        font-size: var(--font-size-xl) !important;
    }

    .weather-forecast {
        grid-template-columns: 1fr;
        gap: var(--spacing-sm);
    }

    /* Stack financial items */
    .financial-grid {
        grid-template-columns: 1fr;
    }

    /* Simplified footer */
    .footer {
        font-size: var(--font-size-xs);
        padding: var(--spacing-sm);
    }

    .footer-text {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs);
    }
}

/* ============================================================================
   BREAKPOINT: SMALL (6-8" tablets)
   481px - 768px - Single column, more breathing room
   ============================================================================ */

@media (min-width: 481px) and (max-width: 768px) {
    .container {
        padding: var(--spacing-md);
    }

    .main-grid {
        grid-template-columns: 1fr;
        grid-template-areas:
            "panel1"
            "panel2"
            "panel3"
            "panel4";
    }

    .header {
        font-size: var(--font-size-lg);
    }

    .widget-title {
        font-size: var(--font-size-md);
    }

    .weather-forecast {
        grid-template-columns: repeat(2, 1fr);
    }

    .financial-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ============================================================================
   BREAKPOINT: MEDIUM (7-10" tablets, Raspberry Pi 7" screen)
   769px - 1024px - 2 column grid with scrolling for 5+ panels
   ============================================================================ */

@media (min-width: 769px) and (max-width: 1024px) {
    .container {
        padding: var(--spacing-md);
        overflow-y: auto;
        overflow-x: hidden;
    }

    .main-grid {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
            "panel1 panel2"
            "panel3 panel4"
            "panel5 panel5";
        grid-auto-flow: dense;
    }

    /* Support for 5 panels (music panel added) */
    .main-grid[data-panels="5"] {
        grid-template-areas:
            "panel1 panel2"
            "panel3 panel4"
            "panel5 panel5";
    }

    /* Support for 6 panels */
    .main-grid[data-panels="6"] {
        grid-template-areas:
            "panel1 panel2"
            "panel3 panel4"
            "panel5 panel6";
    }

    .header {
        font-size: var(--font-size-lg);
    }

    .widget-title {
        font-size: var(--font-size-md);
    }

    .weather-forecast {
        grid-template-columns: repeat(3, 1fr);
    }

    .financial-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    /* Weather details - compact for 7" screen */
    .weather-temp {
        font-size: 2.5rem !important;
    }

    .weather-condition {
        font-size: 1.1rem !important;
    }

    .weather-details {
        gap: 10px;
    }

    .weather-detail {
        font-size: 0.95rem !important;
    }

    .weather-detail .label {
        font-size: 0.75rem !important;
    }

    .forecast-item {
        padding: 5px;
    }

    .forecast-day {
        font-size: 0.85rem !important;
    }

    .forecast-temp {
        font-size: 1.1rem !important;
    }

    .forecast-desc {
        font-size: 0.75rem !important;
    }
}

/* ============================================================================
   BREAKPOINT: LARGE (11-15" laptops)
   1025px - 1440px - 2-3 column grid with larger fonts
   ============================================================================ */

@media (min-width: 1025px) and (max-width: 1440px) {
    .container {
        padding: var(--spacing-lg);
    }

    /* 3 column grid for 4 panels */
    .main-grid {
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-areas:
            "panel1 panel2 panel3"
            "panel4 panel4 panel4";
    }

    /* Alternative 6 panel layout */
    .main-grid[data-panels="6"] {
        grid-template-areas:
            "panel1 panel2 panel3"
            "panel4 panel5 panel6";
    }

    .header {
        font-size: var(--font-size-xl);
    }

    .widget-title {
        font-size: var(--font-size-lg);
    }

    .weather-temp {
        font-size: var(--font-size-xxl) !important;
    }

    /* Weather details - Feels Like and Humidity */
    .weather-detail {
        font-size: var(--font-size-md) !important;
    }

    .label {
        font-size: var(--font-size-base) !important;
    }

    .financial-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    /* 5-day forecast for laptops */
    .weather-forecast {
        grid-template-columns: repeat(5, 1fr);
    }

    /* Weather panel layout */
    .weather-widget .widget-content {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .weather-current {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .weather-details {
        margin-top: 1rem;
        gap: 1.5rem;
    }
}

/* ============================================================================
   BREAKPOINT: EXTRA LARGE (16"+ desktops, 27" displays)
   1441px and above - Maximum 3 column grid with spacious layout
   ============================================================================ */

@media (min-width: 1441px) {
    .container {
        padding: var(--spacing-xl);
        max-width: 2560px;
        margin: 0 auto;
    }

    /* 3 column grid optimized for large displays */
    .main-grid {
        grid-template-columns: repeat(3, 1fr);
        grid-template-areas:
            "panel1 panel2 panel3"
            "panel4 panel5 panel6";
    }

    /* Alternative 4 panel layout for large screens */
    .main-grid[data-panels="4"] {
        grid-template-areas:
            "panel1 panel2 panel3"
            "panel4 panel4 panel4";
    }

    .header {
        font-size: var(--font-size-xxl);
    }

    .widget-title {
        font-size: var(--font-size-xl);
    }

    .widget-status {
        font-size: var(--font-size-md);
    }

    .weather-temp {
        font-size: 6rem !important;
    }

    /* Weather details - Feels Like and Humidity */
    .weather-detail {
        font-size: var(--font-size-lg) !important;
    }

    .label {
        font-size: var(--font-size-md) !important;
    }

    .financial-grid {
        grid-template-columns: repeat(4, 1fr);
    }

    .weather-forecast {
        grid-template-columns: repeat(5, 1fr);
    }

    /* Weather panel uses full height on desktop */
    .weather-widget .widget-content {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .weather-current {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .weather-details {
        margin-top: 1.5rem;
        gap: 2rem;
    }

    .forecast-item {
        padding: 1rem;
    }

    .forecast-day {
        font-size: 1.2rem !important;
    }

    .forecast-temp {
        font-size: 1.8rem !important;
    }

    .forecast-desc {
        font-size: 1rem !important;
    }
}

/* ============================================================================
   PANEL SIZE CLASSES
   Allow individual panels to span multiple columns/rows
   ============================================================================ */

.panel-size-small {
    grid-column: span 1;
    grid-row: span 1;
}

.panel-size-medium {
    grid-column: span 1;
    grid-row: span 1;
}

.panel-size-large {
    grid-column: span 2;
    grid-row: span 1;
}

@media (min-width: 1025px) {
    .panel-size-large {
        grid-column: span 2;
        grid-row: span 1;
    }

    .panel-size-xlarge {
        grid-column: span 3;
        grid-row: span 1;
    }
}

/* ============================================================================
   ORIENTATION SUPPORT
   Adjust layout based on device orientation
   ============================================================================ */

/* ----------------------------------------------------------------------------
   MOBILE PORTRAIT - Stack all panels vertically (scrollable)
   Targets phones and small tablets in portrait orientation
   ---------------------------------------------------------------------------- */
@media (max-width: 768px) and (orientation: portrait) {
    .main-grid {
        display: flex !important;
        flex-direction: column !important;
        gap: var(--panel-gap, 1rem);
        height: auto !important;
        min-height: auto;
        overflow: visible !important;
    }

    .main-grid > .grid-panel {
        /* Override any grid positioning from GridLayoutManager */
        grid-column: unset !important;
        grid-row: unset !important;
        width: 100% !important;
        min-height: 250px;
        max-height: 400px;
        flex-shrink: 0;
    }

    /* Let container grow with content, footer flows naturally */
    .container {
        height: auto !important;
        min-height: 100vh;
        overflow: visible !important;
    }

    /* Body handles scrolling instead of container */
    body {
        overflow-y: auto !important;
        overflow-x: hidden;
    }

    .bottom-row {
        grid-template-columns: 1fr;
    }
}

/* ----------------------------------------------------------------------------
   MOBILE/TABLET LANDSCAPE - 2-column grid layout (scrollable)
   Panels arranged in 2 columns, scroll vertically if needed
   ---------------------------------------------------------------------------- */
@media (max-width: 1024px) and (orientation: landscape) {
    .main-grid {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        grid-auto-rows: minmax(200px, auto) !important;
        grid-template-areas: none !important;
        gap: var(--panel-gap, 0.5rem);
        height: auto !important;
        flex: none !important;
        overflow: visible !important;
    }

    .main-grid > .grid-panel {
        /* Override fixed positioning - use simple 2-col grid */
        grid-column: unset !important;
        grid-row: unset !important;
        grid-area: unset !important;
        min-height: 200px;
        max-height: 350px;
        overflow: hidden;
    }

    /* Container should not stretch content */
    .container {
        height: auto !important;
        min-height: auto !important;
        overflow: visible !important;
    }

    /* Body handles scrolling instead of container */
    body {
        overflow-y: auto !important;
        overflow-x: hidden;
    }

    /* Compact header for landscape mobile */
    .header {
        padding: 0.25rem var(--spacing-sm);
        min-height: auto;
    }

    .header-left .system-name {
        font-size: 1rem;
    }

    .header-right {
        gap: 0.5rem;
    }

    .header-right > * {
        font-size: 0.85rem;
    }

    /* Hide profile name on small landscape to save space */
    #profile-switcher-name {
        display: none;
    }

    /* Compact footer */
    .footer {
        padding: 0.25rem var(--spacing-sm);
        font-size: 0.7rem;
    }

    /* Compact widget headers and content */
    .widget-header {
        padding: 0.25rem 0.5rem;
        min-height: auto;
    }

    .widget-title {
        font-size: 0.85rem;
    }

    .widget-status {
        font-size: 0.7rem;
    }

    .widget-content {
        padding: 0.5rem;
        font-size: 0.85rem;
    }

    /* Compact weather display */
    .weather-temp {
        font-size: 1.8rem !important;
    }

    .weather-condition {
        font-size: 0.9rem !important;
    }

    .weather-details {
        gap: 0.5rem;
    }

    .weather-detail {
        font-size: 0.8rem !important;
    }

    /* Hide forecast on very small landscape screens */
    .weather-forecast {
        display: none;
    }

    /* Compact news items */
    .news-item {
        padding: 0.4rem 0;
        font-size: 0.8rem;
    }
}

/* ============================================================================
   TOUCH-FRIENDLY ADJUSTMENTS
   Larger hit targets and spacing for touchscreen devices
   ============================================================================ */

@media (hover: none) and (pointer: coarse) {
    /* Increase touch targets */
    .widget {
        cursor: pointer;
    }

    .widget-header {
        padding: var(--spacing-md);
    }

    .modal-close,
    .modal-reload {
        min-width: 50px;
        min-height: 50px;
    }

    .exit-button,
    .screensaver-button {
        width: 40px;
        height: 40px;
    }

    /* Reduce hover effects on touch devices */
    .widget:hover,
    .weather-widget:hover,
    .cyberspace-widget:hover,
    .video-widget:hover,
    .news-widget:hover,
    .music-widget:hover,
    .timer-widget:hover,
    .calendar-widget:hover {
        transform: none;
    }
}

/* ============================================================================
   ACCESSIBILITY - REDUCE MOTION
   Respect user preference for reduced motion
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .container {
        animation: none !important;
    }

    .widget {
        animation: none !important;
    }

    .crt::after {
        animation: none !important;
    }
}

/* ============================================================================
   HIGH CONTRAST MODE
   Ensure readability in high contrast mode
   ============================================================================ */

@media (prefers-contrast: high) {
    .widget {
        border-width: 3px;
    }

    .separator {
        height: 3px;
    }

    .widget-title,
    .system-name,
    .time-display {
        font-weight: bold;
    }
}

/* ============================================================================
   PRINT STYLES
   Clean layout for printing (if ever needed)
   ============================================================================ */

@media print {
    .crt,
    .scanlines,
    .exit-button,
    .screensaver-button,
    .modal-overlay {
        display: none !important;
    }

    body {
        background: white;
        color: black;
    }

    .widget {
        border: 2px solid black;
        box-shadow: none;
        page-break-inside: avoid;
    }
}
